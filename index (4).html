<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>خدمة توصيل الكتب المستعملة</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
body { min-height:100vh; display:flex; flex-direction:column; background:linear-gradient(to right, #fdfbfb, #ebedee); font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
main { flex:1; }
.navbar-brand { font-weight:bold; font-size:1.5rem; text-align:center; }
.card-img-container { width:100%; padding-top:65%; overflow:hidden; position:relative; border-radius: 15px; }
.card-img-container img { position:absolute; top:0; left:0; width:100%; height:100%; object-fit:cover; transition: transform 0.3s ease; }
.card-img-container:hover img { transform: scale(1.05); }
.card { border-radius: 15px; transition: transform 0.3s ease, box-shadow 0.3s ease; }
.card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
.btn-primary { background: linear-gradient(45deg, #6a11cb, #2575fc); border:none; }
.btn-primary:hover { background: linear-gradient(45deg, #2575fc, #6a11cb); }
footer { background:#222; color:#fff; padding:20px; text-align:center; }
footer a { color:#fff; transition: color 0.3s ease; }
footer a:hover { color:#2575fc; }
input#searchInput { border-radius: 50px; padding:10px 20px; border:2px solid #2575fc; }
h3 { margin-bottom:20px; font-weight:bold; color:#333; }
.contact-card { background:white; border-radius:15px; padding:20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
</style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container d-flex justify-content-between align-items-center">
<!--  <a class="btn btn-success" href="admin/index.html" id="adminBtn">لوحة المسؤول</a>-->
    <span class="navbar-brand mx-auto text-center" id="navbarTitle">خدمة توصيل الكتب المستعملة</span>
    <button class="btn btn-warning" id="langBtn">English</button>
  </div>
</nav>

<div class="container my-3">
  <input type="text" id="searchInput" class="form-control" placeholder="ابحث عن كتاب / Search for a book">
</div>

<main class="container my-4">
  <h3 id="booksTitle" class="mb-3">جميع الكتب</h3>
  <div class="row" id="bookList"></div>

  <hr class="my-4">

  <h3 id="contactTitle">اتصل بنا لإرسال كتاب</h3>
<div class="contact-card">
  <form
    id="contactForm"
    class="row g-3"
    action="https://formspree.io/f/xvgqyejb"
    method="POST"
  >
    <div class="col-md-6">
      <label class="form-label" id="labelName">الاسم</label>
      <input type="text" name="name" class="form-control" required>
    </div>
    <div class="col-md-6">
      <label class="form-label" id="labelEmail">البريد الإلكتروني</label>
      <input type="email" name="email" class="form-control" required>
    </div>
    <div class="col-12">
      <label class="form-label" id="labelBook">اسم الكتاب</label>
      <input type="text" name="bookName" class="form-control" required>
    </div>
    <div class="col-12">
      <label class="form-label" id="labelBookPrice">سعر الكتاب</label>
      <input type="number" name="bookPrice" class="form-control" required>
    </div>
    <div class="col-12">
      <label class="form-label" id="labelMessage">رسالتك</label>
      <textarea name="message" class="form-control" rows="2"></textarea>
    </div>
    <div class="col-12">
      <button type="submit" class="btn btn-primary w-100" id="sendBtn">إرسال</button>
    </div>
  </form>
</div>

<script>
  const contactForm = document.getElementById('contactForm');

  contactForm.addEventListener('submit', function(e) {
    e.preventDefault(); // prevent normal form submission
    const formData = new FormData(contactForm);

    fetch(contactForm.action, {
      method: 'POST',
      body: formData,
      headers: {
        'Accept': 'application/json'
      }
    })
    .then(response => {
      if (response.ok) {
        alert("تم إرسال طلبك بنجاح! / Your request has been sent successfully!");
        contactForm.reset();
      } else {
        alert("حدث خطأ أثناء إرسال الطلب. / There was an error submitting your request.");
      }
    })
    .catch(error => {
      alert("حدث خطأ أثناء إرسال الطلب. / There was an error submitting your request.");
    });
  });
</script>



</main>

<footer>
  <p>Created by Laith Thawabteh | Phone: +962791111279</p>
  <p>
    <a href="https://www.instagram.com/laith.thawabteh/profilecard/?igsh=a2lhd2I5MGs4anUw" target="_blank"><i class="fab fa-instagram fa-lg me-3"></i></a>
    <a href="https://www.facebook.com/share/14JjPiTSdK3/" target="_blank"><i class="fab fa-facebook fa-lg"></i></a>
  </p>
</footer>

<script>
let books = JSON.parse(localStorage.getItem('booksData')) || [];
let isArabic = true;

function renderBooks(filter=""){
  const list = document.getElementById("bookList");
  list.innerHTML = "";
  books.forEach((b)=>{
    const title = isArabic ? b.titleAr : b.titleEn;
    const desc = isArabic ? b.descriptionAr : b.descriptionEn;
    const price = isArabic ? b.price+" د.ع" : "$"+b.price;
    if(title.toLowerCase().includes(filter.toLowerCase())){
      list.innerHTML += `
      <div class="col-md-4 col-sm-6 mb-3">
        <div class="card h-100 shadow-sm">
          <div class="card-img-container">
            <img src="${b.image}" class="card-img-top" alt="Book">
          </div>
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">${title}</h5>
            <p class="card-text flex-grow-1">${desc}</p>
            <p class="card-text"><strong>${price}</strong></p>
            <button class="btn btn-primary w-100 mb-2">${isArabic ? "إضافة إلى السلة" : "Add to Cart"}</button>
          </div>
        </div>
      </div>`;
    }
  });
}

// Search
document.getElementById("searchInput").addEventListener("input", function(){
  renderBooks(this.value);
});

// Sync with Admin Panel
window.addEventListener('storage', function(){
  books = JSON.parse(localStorage.getItem('booksData')) || [];
  renderBooks();
});

// Language toggle
document.getElementById("langBtn").addEventListener("click", ()=>{
  isArabic = !isArabic;
  document.documentElement.lang = isArabic ? "ar" : "en";
  document.documentElement.dir = isArabic ? "rtl" : "ltr";

  document.getElementById("booksTitle").innerText = isArabic ? "جميع الكتب" : "All Books";
  document.getElementById("contactTitle").innerText = isArabic ? "اتصل بنا لإرسال كتاب" : "Contact Us to Send Book";
  document.getElementById("labelName").innerText = isArabic ? "الاسم" : "Name";
  document.getElementById("labelEmail").innerText = isArabic ? "البريد الإلكتروني" : "Email";
  document.getElementById("labelBook").innerText = isArabic ? "اسم الكتاب" : "Book Name";
  document.getElementById("labelBookPrice").innerText = isArabic ? "سعر الكتاب" : "Book Price";
  document.getElementById("labelImage").innerText = isArabic ? "تحميل صورة الكتاب" : "Upload Book Image";
  document.getElementById("labelMessage").innerText = isArabic ? "رسالتك" : "Message";
  document.getElementById("sendBtn").innerText = isArabic ? "إرسال" : "Send";
  document.getElementById("navbarTitle").innerText = isArabic ? "خدمة توصيل الكتب المستعملة" : "Used Books Delivery Service";
  document.getElementById("adminBtn").innerText = isArabic ? "لوحة المسؤول" : "Admin Panel";
  document.getElementById("langBtn").innerText = isArabic ? "English" : "العربية";

  renderBooks();
});

renderBooks();

// Contact form
document.getElementById("contactForm").addEventListener("submit", function(e){
  e.preventDefault();
  const bookName = document.getElementById("bookName").value;
  const bookPrice = document.getElementById("bookPrice").value;
  alert(isArabic 
    ? `تم إرسال طلبك لبيع الكتاب: ${bookName} بسعر: ${bookPrice} د.ع` 
    : `Your request has been sent to sell the book: ${bookName} at price: $${bookPrice}`);
  this.reset();
});
</script>

</body>
</html>
